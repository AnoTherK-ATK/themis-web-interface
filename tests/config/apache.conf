<VirtualHost *:80>
	DocumentRoot %TRAVIS_BUILD_DIR%
	ServerName localhost

	<Directory "%TRAVIS_BUILD_DIR%/">
		Options FollowSymLinks MultiViews ExecCGI
		AllowOverride All
		Require all granted
	</Directory>

	<Directory "%TRAVIS_BUILD_DIR%/api">
		Options +FollowSymLinks -Indexes
		Order allow,deny
		Allow from all
		Require all granted

		# Rewrite url
		RewriteEngine on
		RewriteCond %{REQUEST_FILENAME} !-f
		RewriteRule ^([^\.]+)$ $1.php [NC,L]
	</Directory>

	# Wire up Apache to use Travis CI's php-fpm.
	# Wire up Apache to use Travis CI's php-fpm.
	<IfModule mod_fastcgi.c>
		AddHandler php7-fcgi-sites .php
		Action php7-fcgi-sites /php7-fcgi-sites
		Alias /php7-fcgi-sites /usr/lib/cgi-bin/php7-fcgi-sites
		FastCgiExternalServer /usr/lib/cgi-bin/php7-fcgi-sites -idle-timeout 60 -socket /var/run/php/php7.2-fpm.sites.mydomain.sock -pass-header Authorization

		<Directory /usr/lib/cgi-bin>
			Require all granted
		</Directory>
    </IfModule>
</VirtualHost>